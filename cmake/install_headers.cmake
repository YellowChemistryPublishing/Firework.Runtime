function(copy_files WITH_ROOT INCLUDE_FILES OUTPUT_DEST)
    foreach (INCLUDE_FILE ${INCLUDE_FILES})
        cmake_path(RELATIVE_PATH INCLUDE_FILE BASE_DIRECTORY ${WITH_ROOT} OUTPUT_VARIABLE TARGET_FILE)
        cmake_path(GET TARGET_FILE PARENT_PATH TARGET_DIR)
        file(MAKE_DIRECTORY "${OUTPUT_DEST}/${TARGET_DIR}")
        file(COPY_FILE ${INCLUDE_FILE} "${OUTPUT_DEST}/${TARGET_FILE}" ONLY_IF_DIFFERENT)
    endforeach()
endfunction()
